webpackJsonp([53],{1144:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=e(389),i=function(a){return a&&a.__esModule?a:{default:a}}(o),n=(e(107),e(92));t.default={data:function(){var a=this;return{markCouponInfoAdd:!1,markCouponInfoUpdate:!1,markCouponInfoDelete:!1,listLoading:!1,pageSize:10,dataTotal:0,currentPage:1,searchType:"商家名称",searchValue:"",startTime:new Date(new Date((new Date).toLocaleDateString()).getTime()),endTime:new Date(new Date((new Date).toLocaleDateString()).getTime()+864e5-1),pickerOptionsStart:{disabledDate:function(t){var e=a.endTime;if(e)return t.getTime()>new Date(e).getTime()}},pickerOptionsEnd:{disabledDate:function(t){var e=a.startTime;if(e)return t.getTime()<new Date(e).getTime()}},array:[],addVisible:!1,editTitle:"新增",formData:{couponName:"",merchantName:"",couponType:1,couponValue:"",couponMoney:1,couponTime:30,couponFree:"",remarks:""},formDataRules:{couponName:[{required:!0,message:"请输入优惠券名称",trigger:"blur"}],merchantName:[{required:!0,message:"请输入发放商家",trigger:"blur"}]}}},mounted:function(){this.markCouponInfoAdd=this.Util.isPermission("markCouponInfoAdd"),this.markCouponInfoUpdate=this.Util.isPermission("markCouponInfoUpdate"),this.markCouponInfoDelete=this.Util.isPermission("markCouponInfoDelete"),this.getTableList(!0)},methods:{openEditDialog:function(a,t){this.addVisible=!0,this.editTitle=a,"新增"===this.editTitle?(this.formData.couponName="",this.formData.merchantName="",this.formData.couponType=1,this.formData.couponValue="",this.formData.couponMoney=1,this.formData.couponTime=30,this.formData.couponFree="",this.formData.remarks=""):"修改"===this.editTitle&&(this.formData.couponName=t.couponName,this.formData.merchantName=t.merchantName,this.formData.couponType=t.couponType,this.formData.couponValue="",this.formData.couponMoney=1,this.formData.couponTime=30,this.formData.couponFree="",this.formData.remarks=t.remarks,this.formData.id=t.id,0===this.formData.couponType?this.formData.couponFree=t.couponValue:1===this.formData.couponType?this.formData.couponMoney=t.couponValue:2===this.formData.couponType&&(this.formData.couponTime=t.couponValue))},closeEditDialog:function(){this.$refs.formData.resetFields()},addSubmit:function(a){var t=this;this.$refs[a].validate(function(a){if(!a)return!1;var e={couponName:t.formData.couponName,couponType:t.formData.couponType,couponValue:"",merchantName:t.formData.merchantName,operatorName:t.Util.userInfo.realName,remarks:t.formData.remarks};0===t.formData.couponType?e.couponValue=t.formData.couponFree:1===t.formData.couponType?e.couponValue=t.formData.couponMoney:2===t.formData.couponType&&(e.couponValue=t.formData.couponTime),"新增"===t.editTitle?t.addTableData(e):"修改"===t.editTitle&&(e.id=t.formData.id,t.updateTableData(e))})},addTableData:function(a){var t=this;(0,n.addCouponType)(a).then(function(a){"SUCCESS"===a.code?(t.$message({message:"操作成功",type:"success"}),t.addVisible=!1,t.getTableList(!0)):t.$message.error(a.msg)})},updateTableData:function(a){var t=this;(0,n.updateCouponType)(a).then(function(a){"SUCCESS"===a.code?(t.$message({message:"操作成功",type:"success"}),t.addVisible=!1,t.getTableList(!0)):t.$message.error(a.msg)})},deleteTableData:function(a){var t=this;this.$confirm("您确定要执行此操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){(0,n.deleteCouponType)({id:a}).then(function(a){"SUCCESS"===a.code?(t.$message({message:"操作成功",type:"success"}),t.getTableList(!0)):t.$message.error(a.msg)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},find:function(){var a=this.startTime,t=this.endTime;null===this.startTime||null===this.endTime?this.$message({message:"开始时间或结束时间不能为空",type:"warning"}):this.startTime&&this.endTime&&(a.getTime()<t.getTime()?this.getTableList():a.getTime()===t.getTime()?this.getTableList():this.$message({message:"开始时间大于结束时间",type:"warning"}))},getTableList:function(a){var t,e=this;a&&(this.currentPage=1);var o=(t={beginDate:"",endDate:"",operatorName:"",merchantName:""},(0,i.default)(t,"beginDate",this.Util.formatDate.format(this.startTime,"yyyy-MM-dd hh:mm:ss")),(0,i.default)(t,"endDate",this.Util.formatDate.format(this.endTime,"yyyy-MM-dd hh:mm:ss")),(0,i.default)(t,"current",this.currentPage-1),(0,i.default)(t,"length",this.pageSize),t);"商家名称"===this.searchType?o.merchantName=this.searchValue:"操作员"===this.searchType&&(o.operatorName=this.searchValue),(0,n.getCouponTypeList)(o).then(function(a){"SUCCESS"===a.data.code?(e.array=a.data.data,e.dataTotal=a.data.totalCount):e.$message.error(a.data.msg)})},handleSizeChange:function(a){this.pageSize=a,this.getTableList(!1)},handleCurrentChange:function(a){this.getTableList(!1)}}}},1199:function(a,t,e){t=a.exports=e(959)(),t.push([a.i,'\n/*! normalize.css v1.1.2 | MIT License | git.io/normalize */article[data-v-5a580c7a],aside[data-v-5a580c7a],details[data-v-5a580c7a],figcaption[data-v-5a580c7a],figure[data-v-5a580c7a],footer[data-v-5a580c7a],header[data-v-5a580c7a],hgroup[data-v-5a580c7a],main[data-v-5a580c7a],nav[data-v-5a580c7a],section[data-v-5a580c7a],summary[data-v-5a580c7a]{display:block}audio[data-v-5a580c7a],canvas[data-v-5a580c7a],video[data-v-5a580c7a]{display:inline-block;*display:inline;*zoom:1}audio[data-v-5a580c7a]:not([controls]){display:none;height:0}[hidden][data-v-5a580c7a]{display:none}html[data-v-5a580c7a]{font-size:100%;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}button[data-v-5a580c7a],html[data-v-5a580c7a],input[data-v-5a580c7a],select[data-v-5a580c7a],textarea[data-v-5a580c7a]{font-family:sans-serif}body[data-v-5a580c7a]{margin:0}a[data-v-5a580c7a]{text-decoration:none}a[data-v-5a580c7a]:focus{outline:thin dotted}a[data-v-5a580c7a]:active,a[data-v-5a580c7a]:hover{outline:0}h1[data-v-5a580c7a]{font-size:2em;margin:.67em 0}h2[data-v-5a580c7a]{font-size:1.5em;margin:.83em 0}h3[data-v-5a580c7a]{font-size:1.17em;margin:1em 0}h4[data-v-5a580c7a]{font-size:1em;margin:1.33em 0}h5[data-v-5a580c7a]{font-size:.83em;margin:1.67em 0}h6[data-v-5a580c7a]{font-size:.67em;margin:2.33em 0}abbr[title][data-v-5a580c7a]{border-bottom:1px dotted}b[data-v-5a580c7a],strong[data-v-5a580c7a]{font-weight:700}blockquote[data-v-5a580c7a]{margin:1em 40px}dfn[data-v-5a580c7a]{font-style:italic}hr[data-v-5a580c7a]{-moz-box-sizing:content-box;box-sizing:content-box;height:0}mark[data-v-5a580c7a]{background:#ff0;color:#000}p[data-v-5a580c7a],pre[data-v-5a580c7a]{margin:1em 0}code[data-v-5a580c7a],kbd[data-v-5a580c7a],pre[data-v-5a580c7a],samp[data-v-5a580c7a]{font-family:monospace,serif;_font-family:courier new,monospace;font-size:1em}pre[data-v-5a580c7a]{white-space:pre;white-space:pre-wrap;word-wrap:break-word}q[data-v-5a580c7a]{quotes:none}q[data-v-5a580c7a]:after,q[data-v-5a580c7a]:before{content:"";content:none}small[data-v-5a580c7a]{font-size:80%}sub[data-v-5a580c7a],sup[data-v-5a580c7a]{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup[data-v-5a580c7a]{top:-.5em}sub[data-v-5a580c7a]{bottom:-.25em}dl[data-v-5a580c7a],menu[data-v-5a580c7a],ol[data-v-5a580c7a],ul[data-v-5a580c7a]{margin:1em 0}dd[data-v-5a580c7a]{margin:0 0 0 40px}menu[data-v-5a580c7a],ol[data-v-5a580c7a],ul[data-v-5a580c7a]{padding:0 0 0 40px}nav ol[data-v-5a580c7a],nav ul[data-v-5a580c7a]{list-style:none;list-style-image:none}img[data-v-5a580c7a]{border:0;-ms-interpolation-mode:bicubic;display:block}svg[data-v-5a580c7a]:not(:root){overflow:hidden}figure[data-v-5a580c7a],form[data-v-5a580c7a]{margin:0}fieldset[data-v-5a580c7a]{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend[data-v-5a580c7a]{border:0;padding:0;white-space:normal;*margin-left:-7px}button[data-v-5a580c7a],input[data-v-5a580c7a],select[data-v-5a580c7a],textarea[data-v-5a580c7a]{font-size:100%;margin:0;vertical-align:baseline;*vertical-align:middle}button[data-v-5a580c7a],input[data-v-5a580c7a]{line-height:normal}button[data-v-5a580c7a],select[data-v-5a580c7a]{text-transform:none}button[data-v-5a580c7a],html input[type=button][data-v-5a580c7a],input[type=reset][data-v-5a580c7a],input[type=submit][data-v-5a580c7a]{-webkit-appearance:button;cursor:pointer;*overflow:visible}button[disabled][data-v-5a580c7a],html input[disabled][data-v-5a580c7a]{cursor:default}input[type=checkbox][data-v-5a580c7a],input[type=radio][data-v-5a580c7a]{box-sizing:border-box;padding:0;*height:13px;*width:13px}input[type=search][data-v-5a580c7a]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input[type=search][data-v-5a580c7a]::-webkit-search-cancel-button,input[type=search][data-v-5a580c7a]::-webkit-search-decoration{-webkit-appearance:none}button[data-v-5a580c7a]::-moz-focus-inner,input[data-v-5a580c7a]::-moz-focus-inner{border:0;padding:0}textarea[data-v-5a580c7a]{overflow:auto;vertical-align:top}table[data-v-5a580c7a]{border-collapse:collapse;border-spacing:0}.float-left[data-v-5a580c7a]{float:left}.float-right[data-v-5a580c7a]{float:right}.clearfix[data-v-5a580c7a]:after{content:".";display:block;height:0;clear:both;visibility:hidden}.clearfix[data-v-5a580c7a]{zoom:1}.text-center[data-v-5a580c7a]{text-align:center}.text-left[data-v-5a580c7a]{text-align:left}.text-right[data-v-5a580c7a]{text-align:right}.text-justify[data-v-5a580c7a]{text-align:justify}.text-info[data-v-5a580c7a]{color:#909399}.text-success[data-v-5a580c7a]{color:#67c23a}.text-warning[data-v-5a580c7a]{color:#e6a23c}.text-danger[data-v-5a580c7a]{color:#f56c6c}.text-blue[data-v-5a580c7a]{color:#20a0ff}.text-orange[data-v-5a580c7a]{color:#fc813b}.text-white[data-v-5a580c7a]{color:#fff}.un-select[data-v-5a580c7a]{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.bg-info[data-v-5a580c7a]{background-color:#eee}.bg-success[data-v-5a580c7a]{background-color:#67c23a}.bg-warning[data-v-5a580c7a]{background-color:#e6a23c}.bg-danger[data-v-5a580c7a]{background-color:#f56c6c}.img-responsive[data-v-5a580c7a]{display:inline-block;height:auto;max-width:100%}.width-100[data-v-5a580c7a]{width:100px}.width-120[data-v-5a580c7a]{width:120px}.width-150[data-v-5a580c7a]{width:150px}.width-160[data-v-5a580c7a]{width:160px}.width-180[data-v-5a580c7a]{width:180px}.width-200[data-v-5a580c7a]{width:200px}.width-230[data-v-5a580c7a]{width:230px}.margin-0[data-v-5a580c7a]{margin:0}.padding-0[data-v-5a580c7a]{padding:0}.font-size-16[data-v-5a580c7a]{font-size:16px}.font-weight-b[data-v-5a580c7a]{font-weight:700}.cursor-pointer[data-v-5a580c7a]{cursor:pointer}.elPag[data-v-5a580c7a]{width:100%;text-align:center}.elPag .el-pagination[data-v-5a580c7a]{display:inline-block}.elPag .PagGo[data-v-5a580c7a]{padding:5px!important;position:relative;top:6px}.content[data-v-5a580c7a]{background:#eee;border-radius:10px}.content .content-body[data-v-5a580c7a]{padding:0 10px}.content .content-body .body-top[data-v-5a580c7a]{padding:10px 0}.content .content-body .body-top .body-top-left[data-v-5a580c7a]{float:left;width:79%}.content .content-body .body-top .body-top-right[data-v-5a580c7a]{float:right;width:19%}.content .content-body .body-paging[data-v-5a580c7a]{padding:20px 0}.dialog-footer[data-v-5a580c7a]{margin-bottom:20px}',""])},1255:function(a,t,e){var o=e(1199);"string"==typeof o&&(o=[[a.i,o,""]]),o.locals&&(a.exports=o.locals);e(960)("8043d02c",o,!0)},1381:function(a,t){a.exports={render:function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("el-row",{staticClass:"content"},[e("el-col",{staticClass:"content-body",attrs:{span:24}},[e("div",{staticClass:"body-top clearfix"},[e("div",{staticClass:"body-top-left"},[e("span",[a._v("开始时间：")]),a._v(" "),e("el-date-picker",{attrs:{type:"datetime",placeholder:"请输入查询时间","picker-options":a.pickerOptionsStart},model:{value:a.startTime,callback:function(t){a.startTime=t},expression:"startTime"}}),a._v(" "),e("span",[a._v("结束时间：")]),a._v(" "),e("el-date-picker",{attrs:{type:"datetime",placeholder:"请输入查询时间","picker-options":a.pickerOptionsEnd},model:{value:a.endTime,callback:function(t){a.endTime=t},expression:"endTime"}}),a._v(" "),e("el-select",{staticClass:"width-120",attrs:{placeholder:"请选择"},on:{change:function(t){a.searchValue=""}},model:{value:a.searchType,callback:function(t){a.searchType=t},expression:"searchType"}},[e("el-option",{attrs:{label:"商家名称",value:"商家名称"}}),a._v(" "),e("el-option",{attrs:{label:"操作员",value:"操作员"}})],1),a._v(" "),e("el-input",{staticClass:"width-180",attrs:{placeholder:"请输入查询关键字",clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&a._k(t.keyCode,"enter",13,t.key,"Enter"))return null;a.getTableList(!0)}},model:{value:a.searchValue,callback:function(t){a.searchValue="string"==typeof t?t.trim():t},expression:"searchValue"}}),a._v(" "),e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){a.find()}}},[a._v("查询")])],1),a._v(" "),e("div",{staticClass:"body-top-right text-right"},[a.markCouponInfoAdd?e("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){a.openEditDialog("新增")}}},[a._v("新增")]):a._e()],1)]),a._v(" "),e("div",{staticClass:"body-table",attrs:{id:"printContent"}},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:a.listLoading,expression:"listLoading"}],attrs:{data:a.array,sortable:"",height:"539"}},[e("el-table-column",{attrs:{type:"index","min-width":"80"}}),a._v(" "),e("el-table-column",{attrs:{prop:"couponName",label:"优惠券名称","min-width":"100",sortable:"","show-overflow-tooltip":""}}),a._v(" "),e("el-table-column",{attrs:{prop:"couponType",label:"优惠券类型","min-width":"80",sortable:""},scopedSlots:a._u([{key:"default",fn:function(t){return[e("span",[a._v(a._s(a._f("transformCouponType")(t.row.couponType)))])]}}])}),a._v(" "),e("el-table-column",{attrs:{prop:"couponValue",label:"优惠券额度","min-width":"90",sortable:""}}),a._v(" "),e("el-table-column",{attrs:{prop:"merchantName",label:"发放商家","min-width":"100",sortable:""}}),a._v(" "),e("el-table-column",{attrs:{prop:"operatorName",label:"操作员","min-width":"100",sortable:""}}),a._v(" "),e("el-table-column",{attrs:{prop:"createTime",label:"新增时间","min-width":"120",sortable:"","show-overflow-tooltip":""},scopedSlots:a._u([{key:"default",fn:function(t){return[e("span",[a._v(a._s(a._f("transformTime")(t.row.createTime)))])]}}])}),a._v(" "),e("el-table-column",{attrs:{prop:"remarks",label:"备注","min-width":"110",sortable:"","show-overflow-tooltip":""}}),a._v(" "),e("el-table-column",{attrs:{label:"操作","min-width":"100"},scopedSlots:a._u([{key:"default",fn:function(t){return[a.markCouponInfoUpdate?e("a",{staticClass:"text-blue",attrs:{href:"javaScript:;"},on:{click:function(e){a.openEditDialog("修改",t.row)}}},[a._v("修改  ")]):a._e(),a._v(" "),a.markCouponInfoDelete?e("a",{staticClass:"text-danger",attrs:{href:"javaScript:;"},on:{click:function(e){a.deleteTableData(t.row.id)}}},[a._v("删除")]):a._e()]}}])})],1)],1),a._v(" "),e("div",{staticClass:"body-paging text-center elPag"},[e("el-pagination",{attrs:{"current-page":a.currentPage,"page-size":a.pageSize,layout:"total,sizes,prev, pager, next, jumper",total:a.dataTotal},on:{"size-change":a.handleSizeChange,"current-change":a.handleCurrentChange,"update:currentPage":function(t){a.currentPage=t}}}),a._v(" "),e("el-button",{staticClass:"PagGo",attrs:{type:"primary"}},[a._v("GO")])],1)])],1),a._v(" "),e("el-dialog",{staticClass:"form-dialog",attrs:{title:a.editTitle,width:"50%",visible:a.addVisible,"close-on-click-modal":!1},on:{close:a.closeEditDialog,"update:visible":function(t){a.addVisible=t}}},[e("div",{staticClass:"dialog-box"},[e("el-form",{ref:"formData",attrs:{"label-position":"left","label-width":"100px",model:a.formData,rules:a.formDataRules}},[e("el-form-item",{attrs:{label:"优惠券名称:",prop:"couponName"}},[e("el-input",{staticClass:"width-180",attrs:{clearable:"",placeholder:"请输入优惠券名称",maxlength:"20"},model:{value:a.formData.couponName,callback:function(t){a.$set(a.formData,"couponName","string"==typeof t?t.trim():t)},expression:"formData.couponName"}})],1),a._v(" "),e("el-form-item",{attrs:{label:"发放商家:",prop:"merchantName"}},[e("el-input",{staticClass:"width-180",attrs:{clearable:"",placeholder:"请输入发放商家",maxlength:"20"},model:{value:a.formData.merchantName,callback:function(t){a.$set(a.formData,"merchantName","string"==typeof t?t.trim():t)},expression:"formData.merchantName"}})],1),a._v(" "),e("el-form-item",{attrs:{label:"优惠类型:",prop:"couponType"}},[e("el-select",{staticClass:"width-180",attrs:{placeholder:"选择优惠类型"},model:{value:a.formData.couponType,callback:function(t){a.$set(a.formData,"couponType",t)},expression:"formData.couponType"}},[e("el-option",{attrs:{label:"减免金额",value:1}}),a._v(" "),e("el-option",{attrs:{label:"减免时间",value:2}}),a._v(" "),e("el-option",{attrs:{label:"全免",value:0}})],1)],1),a._v(" "),e("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1===a.formData.couponType,expression:"formData.couponType === 1"}],key:"couponMoney",attrs:{label:"优惠额度:",prop:"couponMoney"}},[e("el-input-number",{staticClass:"width-180",attrs:{precision:2,step:1,min:0,max:1e3},model:{value:a.formData.couponMoney,callback:function(t){a.$set(a.formData,"couponMoney","string"==typeof t?t.trim():t)},expression:"formData.couponMoney"}}),e("span",[a._v("  元")])],1),a._v(" "),e("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2===a.formData.couponType,expression:"formData.couponType === 2"}],key:"couponTime",attrs:{label:"优惠额度:",prop:"couponTime"}},[e("el-input-number",{staticClass:"width-180",attrs:{step:30,min:0,max:6e3},model:{value:a.formData.couponTime,callback:function(t){a.$set(a.formData,"couponTime","string"==typeof t?t.trim():t)},expression:"formData.couponTime"}}),e("span",[a._v("  分钟")])],1),a._v(" "),e("el-form-item",{directives:[{name:"show",rawName:"v-show",value:0===a.formData.couponType,expression:"formData.couponType === 0"}],key:"couponFree",attrs:{label:"优惠额度:",prop:"couponFree"}},[e("el-input",{staticClass:"width-180",attrs:{disabled:"",placeholder:"全免",maxlength:"8"},model:{value:a.formData.couponFree,callback:function(t){a.$set(a.formData,"couponFree","string"==typeof t?t.trim():t)},expression:"formData.couponFree"}})],1),a._v(" "),e("el-form-item",{attrs:{label:"备注:"}},[e("el-input",{attrs:{clearable:"",placeholder:"请输入备注"},model:{value:a.formData.remarks,callback:function(t){a.$set(a.formData,"remarks","string"==typeof t?t.trim():t)},expression:"formData.remarks"}})],1)],1),a._v(" "),e("div",{staticClass:"dialog-footer text-center"},[e("el-button",{staticClass:"footer-btn",on:{click:function(t){a.addVisible=!1}}},[a._v("取消")]),a._v(" "),e("el-button",{staticClass:"footer-btn",attrs:{type:"primary"},on:{click:function(t){a.addSubmit("formData")}}},[a._v("确认")])],1)],1)])],1)},staticRenderFns:[]}},429:function(a,t,e){e(1255);var o=e(37)(e(1144),e(1381),"data-v-5a580c7a",null);a.exports=o.exports}});