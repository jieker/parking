webpackJsonp([67],{406:function(a,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=e(111),n=function(a){return a&&a.__esModule?a:{default:a}}(r),o=e(92),i=e(2);t.default={data:function(){return{yearMonth:new Date,SumTop:{month:1,year:2018,sumState:0},aliPayArr:[],cashPayArr:[],otherPayAr:[],pieMoneyArr:[],dayArr:[],pieTypeArr:[],smallPayArr:[],unionPayArr:[],weChatPayArr:[],yearMonthData:"",dateStr:[],totalMoney:[],array:[],currentPage:1,total:0,pageSize:10,listLoading:!1}},mounted:function(){this.getTableList(),this.drawLine()},methods:{exportExcel:function(){var a=this;e.e(0).then(function(){var t=e(361),r=t.export_json_to_excel,n=["日期","电子优惠（元）","纸质优惠（元）","其他优惠（元）","现金支付（元）","微信支付（元）","小猫支付（元）","实收（元）","应收（元）"],o=["dateStr","electronicFree","paperFree","otherFree","cashPay","weChatPay","smallPay","sumDiscountedPay","sumTotalPay"],i=a.Util.deepCopy(a.array);r(n,a.Util.formatJson(o,i),"月汇总表")}.bind(null,e)).catch(e.oe)},handleSizeChange:function(a){this.page=a-1},handleCurrentChange:function(a){this.currentPage1=a,this.page=a-1},find:function(){},getTableList:function(){var a=this,t={operatorId:this.Util.userInfo.id,date:this.yearMonth,option:this.SumTop.sumState},e=this.yearMonth;this.yearMonthData=this.Util.formatDate.format(e,"yyyy-MM"),t.date=this.Util.formatDate.format(e,"yyyy-MM"),(0,o.getChargeCountMonth)(t).then(function(t){a.array=t.data.data.countByMoneys,a.array&&a.array.forEach(function(t){a.dateStr.push(t.dateStr)}),a.drawLine(),a.charMonthPay(),a.array=t.data.data,alert((0,n.default)(a.array)),a.array=t.data.data.countByMoneys,a.aliPayArr=t.data.data.aliPayArr,a.cashPayArr=t.data.data.cashPayArr,a.otherPayArr=t.data.data.otherPayArr,a.pieMoneyArr=t.data.data.pieMoneyArr,a.dayArr=t.data.data.dayArr,a.pieTypeArr=t.data.data.pieTypeArr,a.smallPayArr=t.data.data.smallPayArr,a.unionPayArr=t.data.data.unionPayArr,a.weChatPayArr=t.data.data.weChatPayArr,a.array&&a.array.forEach(function(t){a.dateStr.push(t.dateStr)}),a.drawLine()}).catch(function(a){console.log(a)})},drawLine:function(){var a=i.init(document.getElementById("monthSumLine")),t=["#C33531","#EFE42A","#64BD3D","#EE9201","#29AAE3","#B74AE5","#0AAF9F"],e={color:t,title:{text:this.yearMonthData.substring(0,4)+"年"+this.yearMonthData.substring(5,7)+"月收入统计图",left:"center"},tooltip:{trigger:"axis",axisPointer:{type:"cross"}},legend:{data:this.pieTypeArr,bottom:40},grid:{top:70,bottom:100,containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:this.dayArr},yAxis:{type:"value",name:"月收入",min:0,max:1e3,axisLabel:{formatter:"{value} 元"}},series:[{name:"微信支付",type:"line",smooth:!0,data:this.weChatPayArr},{name:"小猫支付",type:"line",smooth:!0,data:this.smallPayArr},{name:"现金支付",type:"line",smooth:!0,data:this.cashPayArr},{name:"银联支付",type:"line",smooth:!0,data:this.unionPayArr},{name:"支付宝支付",type:"line",smooth:!0,data:this.aliPayArr},{name:"其他支付",type:"line",smooth:!0,data:this.otherPayArr}]};a.setOption(e)},charMonthPay:function(){var a=document.getElementById("monthSumPie"),t=i.init(a),e={title:{text:this.yearMonthData.substring(0,4)+"年"+this.yearMonthData.substring(5,7)+"月收入统计图",left:"center"},tooltip:{trigger:"item",formatter:"{b} : {c}元 ({d}%)"},legend:{bottom:10,left:"center",data:["微信支付","小猫支付","现金支付","电子优惠","纸质优惠"]},series:[{type:"pie",radius:"65%",center:["50%","50%"],data:[{value:1548,name:"微信支付"},{value:535,name:"小猫支付"},{value:510,name:"现金支付"},{value:634,name:"纸质优惠"},{value:735,name:"电子优惠"}],itemStyle:{emphasis:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]};t.setOption(e)}}}}});