webpackJsonp([45],{1153:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(92);e.default={data:function(){return{markChargeStandardAdd:!1,markChargeStandardUpdate:!1,markChargeStandardDelete:!1,cloudCharge:"",listLoading:!1,pageSize:10,dataTotal:0,currentPage:1,CostStn:{cloudPayFlag:!0,timeLimitFlag:!1,rangeDateValue:[new Date(2016,9,10,0,0),new Date(2016,9,10,12,0)],memberType:"",remark:"",operatorId:"",standarId:"",regionArr:[],chargeStn:{dayMoney:0,monthMoney:0,yearMoney:0},chargeStandardUnit:"月",chargeStandardNum:0},regionArray:[],array:[],isUpdate:!1,costStnVisible:!1,costStnTitle:"新增标准",addCostStnLoading:!1,addCostStnFormRules:{chargeStn:[],memberType:[{required:!0,message:"请输入会员类型",trigger:"blur"}],chargeStandardNum:[{required:!0,message:"请输入收费标准",trigger:"change"}],regionArr:[{type:"array",required:!0,message:"至少选择一个有效区域",trigger:"change"}]}}},mounted:function(){this.getTableList(),this.markChargeStandardAdd=this.Util.isPermission("markChargeStandardAdd"),this.markChargeStandardUpdate=this.Util.isPermission("markChargeStandardUpdate"),this.markChargeStandardDelete=this.Util.isPermission("markChargeStandardDelete")},beforeUpdate:function(){document.getElementById("menu-box-6").classList.add("menu-active")},methods:{Charges:function(){0===this.CostStn.chargeStandardNum?(this.cloudCharge="disabled",this.CostStn.cloudPayFlag=!1):(this.cloudCharge=!1,this.CostStn.cloudPayFlag=!0)},handleSizeChange:function(t){this.pageSize=t,this.getTableList()},handleCurrentChange:function(t){this.currentPage=t,this.getTableList()},formatRegion:function(t,e){var a="",n=t.regionInfos;for(var i in n)a+=n[i].regionName+",";return a.substring(0,a.length-1)},tbHeader:function(t){return"1"==t.column.label?{display:"none"}:{"text-align":"center"}},indexMethod:function(t){return t+this.pageSize*(this.currentPage-1)+1},regionChange:function(t){for(var e="",a=0;a<t.length;a++)for(var n in this.regionArray)t[a]==this.regionArray[n].regionName&&(e+=this.regionArray[n].id+",");return e.substring(0,e.length-1)},regionNames:function(t){var e="";console.log(this.regionArray);for(var a=0;a<t.length;a++)for(var n in this.regionArray)t[a]==this.regionArray[n].regionName&&(e+=this.regionArray[n].regionName+",");return e.substring(0,e.length-1)},addCsotStn:function(){this.costStnTitle="新增标准",this.costStnVisible=!0,this.isUpdate=!1,this.getRegion(),this.CostStn.memberType="",this.CostStn.chargeStn.dayMoney="",this.CostStn.chargeStn.monthMoney="",this.CostStn.chargeStn.yearMoney="",this.CostStn.remark="",this.CostStn.regionArr=[],this.CostStn.cloudPayFlag=!1,this.CostStn.timeLimitFlag=!1,this.CostStn.chargeStandardUnit="月",this.CostStn.chargeStandardNum=0},editCostStn:function(t,e){if(console.log(e),""!==e.startTime&&""!==e.endTime){var a=e.startTime.split(":"),n=e.endTime.split(":");this.CostStn.rangeDateValue=[new Date(2016,9,10,a[0],a[1]),new Date(2016,9,10,n[0],n[1])]}else this.CostStn.rangeDateValue=[new Date(2016,9,10,0,0),new Date(2016,9,10,0,0)];this.costStnVisible=!0,this.costStnTitle="修改标准",this.isUpdate=!0,this.CostStn.regionArr=[],this.getRegion();for(var i=0;i<e.regionInfos.length;i++)this.CostStn.regionArr.push(e.regionInfos[i].regionName);this.CostStn.memberType=e.memberType,this.CostStn.chargeStn.dayMoney="",this.CostStn.chargeStn.monthMoney="",this.CostStn.chargeStn.yearMoney="",this.CostStn.remark=e.remark,this.CostStn.standarId=e.id,this.CostStn.cloudPayFlag=e.cloudPayFlag,this.CostStn.timeLimitFlag=e.timeLimitFlag,e.dayMoney?(this.CostStn.chargeStandardUnit="天",this.CostStn.chargeStandardNum=e.dayMoney):e.monthMoney?(this.CostStn.chargeStandardUnit="月",this.CostStn.chargeStandardNum=e.monthMoney):e.yearMoney&&(this.CostStn.chargeStandardUnit="年",this.CostStn.chargeStandardNum=e.yearMoney)},CostStnSubmit:function(){var t=this,e="",a="",i="",r="",o=this.CostStn.regionArr,s=!1;this.$refs.CostStnForm.validate(function(l){if(!1!==s)return!1;if(l){t.CostStn.timeLimitFlag&&(e=t.Util.formatDate.format(t.CostStn.rangeDateValue[0],"hh:mm"),a=t.Util.formatDate.format(t.CostStn.rangeDateValue[1],"hh:mm")),o.length&&(i=t.regionChange(o),r=t.regionNames(o)),"天"===t.CostStn.chargeStandardUnit?t.CostStn.chargeStn.dayMoney=t.CostStn.chargeStandardNum:"月"===t.CostStn.chargeStandardUnit?t.CostStn.chargeStn.monthMoney=t.CostStn.chargeStandardNum:"年"===t.CostStn.chargeStandardUnit&&(t.CostStn.chargeStn.yearMoney=t.CostStn.chargeStandardNum);var d={operatorId:t.Util.userInfo.id,memberType:t.CostStn.memberType,dayMoney:t.CostStn.chargeStn.dayMoney,monthMoney:t.CostStn.chargeStn.monthMoney,yearMoney:t.CostStn.chargeStn.yearMoney,regionId:i,regionNames:r,remark:t.CostStn.remark,cloudPayFlag:t.CostStn.cloudPayFlag,timeLimitFlag:t.CostStn.timeLimitFlag,startTime:e,endTime:a};t.isUpdate?(d.id=t.CostStn.standarId,(0,n.updateMemberRate)(d).then(function(e){"SUCCESS"==e.code?(t.costStnVisible=!1,t.getTableList(),t.$message({type:"success",message:e.msg})):t.$message.error(e.msg)})):(0,n.addMemberRate)(d).then(function(e){if("SUCCESS"==e.code)return t.costStnVisible=!1,t.getTableList(),s=!0,!0;t.$message.error(e.msg)})}else console.log("error submit!!")})},handleDelete:function(t,e){var a=this;this.$confirm("确认删除该记录吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={id:e.id};(0,n.deleteMemberRate)(t).then(function(t){"SUCCESS"==t.code?(a.costStnVisible=!1,a.getTableList(),a.$message({type:"success",message:t.msg})):a.$message.error(t.msg)})})},getTableList:function(){var t=this,e={operatorId:this.Util.userInfo.id,current:this.currentPage-1,length:this.pageSize};this.listLoading=!0,(0,n.listMemberRate)(e).then(function(e){t.listLoading=!1,"SUCCESS"===e.data.code?(t.array=e.data.data.content,t.dataTotal=e.data.data.totalElements):t.$message.error(e.data.msg)})},getRegion:function(){var t=this,e={operatorId:this.Util.userInfo.id};(0,n.getRegionAllSimpleInfo)(e).then(function(e){"SUCCESS"===e.data.code?t.regionArray=e.data.data:t.$message.error(e.data.msg)})}}}},1230:function(t,e,a){e=t.exports=a(959)(),e.push([t.i,'\n/*! normalize.css v1.1.2 | MIT License | git.io/normalize */article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}audio,canvas,video{display:inline-block;*display:inline;*zoom:1}audio:not([controls]){display:none;height:0}[hidden]{display:none}html{font-size:100%;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}button,html,input,select,textarea{font-family:sans-serif}body{margin:0}a{text-decoration:none}a:focus{outline:thin dotted}a:active,a:hover{outline:0}h1{font-size:2em;margin:.67em 0}h2{font-size:1.5em;margin:.83em 0}h3{font-size:1.17em;margin:1em 0}h4{font-size:1em;margin:1.33em 0}h5{font-size:.83em;margin:1.67em 0}h6{font-size:.67em;margin:2.33em 0}abbr[title]{border-bottom:1px dotted}b,strong{font-weight:700}blockquote{margin:1em 40px}dfn{font-style:italic}hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}mark{background:#ff0;color:#000}p,pre{margin:1em 0}code,kbd,pre,samp{font-family:monospace,serif;_font-family:courier new,monospace;font-size:1em}pre{white-space:pre;white-space:pre-wrap;word-wrap:break-word}q{quotes:none}q:after,q:before{content:"";content:none}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}dl,menu,ol,ul{margin:1em 0}dd{margin:0 0 0 40px}menu,ol,ul{padding:0 0 0 40px}nav ol,nav ul{list-style:none;list-style-image:none}img{border:0;-ms-interpolation-mode:bicubic;display:block}svg:not(:root){overflow:hidden}figure,form{margin:0}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{border:0;padding:0;white-space:normal;*margin-left:-7px}button,input,select,textarea{font-size:100%;margin:0;vertical-align:baseline;*vertical-align:middle}button,input{line-height:normal}button,select{text-transform:none}button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer;*overflow:visible}button[disabled],html input[disabled]{cursor:default}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0;*height:13px;*width:13px}input[type=search]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}textarea{overflow:auto;vertical-align:top}table{border-collapse:collapse;border-spacing:0}.float-left{float:left}.float-right{float:right}.clearfix:after{content:".";display:block;height:0;clear:both;visibility:hidden}.clearfix{zoom:1}.text-center{text-align:center}.text-left{text-align:left}.text-right{text-align:right}.text-justify{text-align:justify}.text-info{color:#909399}.text-success{color:#67c23a}.text-warning{color:#e6a23c}.text-danger{color:#f56c6c}.text-blue{color:#20a0ff}.text-orange{color:#fc813b}.text-white{color:#fff}.un-select{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.bg-info{background-color:#eee}.bg-success{background-color:#67c23a}.bg-warning{background-color:#e6a23c}.bg-danger{background-color:#f56c6c}.img-responsive{display:inline-block;height:auto;max-width:100%}.width-100{width:100px}.width-120{width:120px}.width-150{width:150px}.width-160{width:160px}.width-180{width:180px}.width-200{width:200px}.width-230{width:230px}.margin-0{margin:0}.padding-0{padding:0}.font-size-16{font-size:16px}.font-weight-b{font-weight:700}.cursor-pointer{cursor:pointer}.elPag{width:100%;text-align:center}.elPag .el-pagination{display:inline-block}.elPag .PagGo{padding:5px!important;position:relative;top:6px}#ch_stand .el-table thead.is-group th{padding:0}#ch_stand .remarkContent .isLimit{height:80px}#ch_stand .remarkContent .isLimit .prompt{color:red;font-size:16px;display:block}#ch_stand .checkTime{display:inline-block}#ch_stand .checkTime .el-input{width:45px}#ch_stand .checkTime .el-input .el-input__inner{padding:0;text-align:center}',""])},1286:function(t,e,a){var n=a(1230);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);a(960)("2009881b",n,!0)},1411:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{attrs:{id:"ch_stand"}},[a("div",{staticClass:"FA-warpper"},[a("el-col",{staticClass:"FA-toolbar ",attrs:{span:24}},[t.markChargeStandardAdd?a("el-button",{staticClass:"Fright",staticStyle:{"margin-bottom":"10px"},attrs:{type:"primary"},on:{click:t.addCsotStn}},[t._v("添加")]):t._e(),t._v(" "),a("el-button",{staticClass:"Fright",staticStyle:{"margin-bottom":"10px","margin-right":"10px"},attrs:{type:"primary"},on:{click:t.getTableList}},[t._v("刷新")])],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],staticStyle:{width:"100%"},attrs:{data:t.array,"header-cell-style":t.tbHeader,"highlight-current-row":"",height:"539"}},[a("el-table-column",{attrs:{type:"index",index:t.indexMethod,label:"序号",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"memberType",label:"会员类型","min-width":"100"}}),t._v(" "),a("el-table-column",{attrs:{label:"收费标准"}},[a("el-table-column",{attrs:{prop:"dayMoney",label:"元/天",width:"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"monthMoney",label:"元/月",width:"100",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"yearMoney",label:"元/年",width:"100",align:"center"}})],1),t._v(" "),a("el-table-column",{attrs:{prop:"cloudPayFlag",label:"允许云端续费","min-width":"110",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("transformBoolean")(e.row.cloudPayFlag)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"添加时间","min-width":"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s(t._f("transformTime")(e.row.createTime)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"regionInfos",label:"有效区域","min-width":"110",formatter:t.formatRegion,align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注","min-width":"100","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"110",fixed:"right",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t.markChargeStandardUpdate?a("a",{staticClass:"text-blue",attrs:{href:"javaScript:;"},on:{click:function(a){t.editCostStn(e.$index,e.row)}}},[a("i",{staticClass:"el-icon-edit"}),t._v("修改  ")]):t._e(),t._v(" "),t.markChargeStandardDelete?a("a",{staticClass:"text-danger",attrs:{href:"javaScript:;"},on:{click:function(a){t.handleDelete(e.$index,e.row)}}},[a("i",{staticClass:"el-icon-delete"}),t._v("删除")]):t._e()]}}])})],1),t._v(" "),a("div",{staticClass:"elPag clearfix"},[a("el-pagination",{attrs:{"current-page":t.currentPage,"page-size":t.pageSize,layout:"total,sizes,prev, pager, next, jumper",total:t.dataTotal},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.currentPage=e}}}),t._v(" "),a("el-button",{staticClass:"PagGo",attrs:{type:"primary"}},[t._v("GO")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:t.costStnTitle,visible:t.costStnVisible},on:{"update:visible":function(e){t.costStnVisible=e},open:function(e){t.Charges()}}},[a("el-form",{ref:"CostStnForm",staticClass:"clearfix",attrs:{model:t.CostStn,"label-width":"100px",rules:t.addCostStnFormRules}},[a("el-col",{attrs:{span:20}},[a("div",[a("el-form-item",{attrs:{label:"会员类型",prop:"memberType"}},[a("el-input",{staticClass:"width-200",attrs:{placeholder:"请输入会员类型名称",clearable:""},model:{value:t.CostStn.memberType,callback:function(e){t.$set(t.CostStn,"memberType",e)},expression:"CostStn.memberType"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"收费单位"}},[a("el-select",{staticClass:"width-200",model:{value:t.CostStn.chargeStandardUnit,callback:function(e){t.$set(t.CostStn,"chargeStandardUnit",e)},expression:"CostStn.chargeStandardUnit"}},[a("el-option",{attrs:{label:"天",value:"天"}}),t._v(" "),a("el-option",{attrs:{label:"月",value:"月"}}),t._v(" "),a("el-option",{attrs:{label:"年",value:"年"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"收费标准",prop:"chargeStandardNum"}},[a("el-input-number",{staticClass:"width-200",attrs:{precision:2,step:10,min:0,max:99999},on:{change:t.Charges},model:{value:t.CostStn.chargeStandardNum,callback:function(e){t.$set(t.CostStn,"chargeStandardNum",e)},expression:"CostStn.chargeStandardNum"}})],1),t._v(" "),a("el-form-item",{staticStyle:{"margin-bottom":"15px"},attrs:{label:"有效区域",prop:"regionArr"}},[a("el-checkbox-group",{model:{value:t.CostStn.regionArr,callback:function(e){t.$set(t.CostStn,"regionArr",e)},expression:"CostStn.regionArr"}},t._l(t.regionArray,function(t){return a("el-checkbox",{key:t.id,attrs:{label:t.regionName,name:"regionArr"}})}))],1),t._v(" "),a("el-form-item",{staticClass:"remarkContent",attrs:{label:"备      注"}},[a("el-input",{attrs:{clearable:""},model:{value:t.CostStn.remark,callback:function(e){t.$set(t.CostStn,"remark",e)},expression:"CostStn.remark"}}),t._v(" "),a("div",[a("el-checkbox",{attrs:{disabled:t.cloudCharge},model:{value:t.CostStn.cloudPayFlag,callback:function(e){t.$set(t.CostStn,"cloudPayFlag",e)},expression:"CostStn.cloudPayFlag"}},[t._v("是否允许云端续费")])],1)],1)],1)])],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",loading:t.addCostStnLoading},nativeOn:{click:function(e){return t.CostStnSubmit(e)}}},[t._v("提交")]),t._v(" "),a("el-button",{nativeOn:{click:function(e){t.costStnVisible=!1}}},[t._v("取消")])],1)],1)],1)},staticRenderFns:[]}},441:function(t,e,a){a(1286);var n=a(37)(a(1153),a(1411),null,null);t.exports=n.exports}});